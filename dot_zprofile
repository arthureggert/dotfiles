check_and_source() {
  if [ -s $1 ]; then
    source $1
  fi
}

autoload -Uz +X compinit 

eval "$(/opt/homebrew/bin/brew shellenv)"

check_and_source "$HOMEBREW_PREFIX/opt/antidote/share/antidote/antidote.zsh"
check_and_source "$(brew --prefix)/share/zsh-autosuggestions/zsh-autosuggestions.zsh"
check_and_source "$(brew --prefix)/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"

compinit

source <(zenpie completion zsh)

